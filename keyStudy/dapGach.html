<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dap Gach</title>
</head>
<body>
<canvas id="myCanvas" width="900 px" height="500 px"
        style=" background : aliceblue ;border: 1px solid #d30106;"></canvas>
<script>
    let canvas = document.getElementById('game');
    let context = canvas.getContext('2d');
    function drawScore(){
        context.beginPath();
        context.font = "30px Arial";
        context.fillStyle="White";
        context.fillText("Score: "+myScore, 100, 50);
        context.closePath();
    }

    function drawBackGroundPlay(){
        let img=document.getElementById("img");
        context.beginPath();
        context.drawImage(img,0,0,canvas.width,canvas.height);
        context.closePath();

    }
    function drawBackGroundLose(){
        let img=document.getElementById("imglose");
        context.beginPath();
        context.drawImage(img,0,0,canvas.width,canvas.height);
        context.closePath();
    }
    function drawBackGroundWin(){
        let img=document.getElementById("imgwin");
        context.beginPath();
        context.drawImage(img,0,0,canvas.width,canvas.height);
        context.closePath();
    }

    let ball = {
        x: 100,//100
        y: 400,//400
        dx: 3,
        dy: 2,
        radius: 10,
    };
    let thanhChan = {
        width: 150,
        height: 10,
        x: 100,
        y: canvas.height - 10,
        speed: 7,

        diChuyenSangTrai: false,
        diChuyenSangPhai: false
    };
    let gameOver = false;
    let luuGiaTriCacVienGach = {
        offsetX: 1,
        offsetY: 1,
        margin: 0.2,
        width: 50,
        height: 20,
        totalRow: 12,
        totalCol: 20
    };
    let array = [];
    for (let i = 0; i < luuGiaTriCacVienGach.totalRow; i++) {
        for (let j = 0; j < luuGiaTriCacVienGach.totalCol; j++) {
            array.push({
                x: luuGiaTriCacVienGach.offsetX + j * (luuGiaTriCacVienGach.width + luuGiaTriCacVienGach.margin),

                y: luuGiaTriCacVienGach.offsetY + i * (luuGiaTriCacVienGach.height + luuGiaTriCacVienGach.margin),
                isBroken: false
            });
        }
    }


    document.addEventListener('keyup', function (event) {
        if (event.keyCode == 37) {
            thanhChan.diChuyenSangTrai = false;
        } else if (event.keyCode == 39) {
            thanhChan.diChuyenSangPhai = false;
        }
    });
    document.addEventListener('keydown', function (event) {
        if (event.keyCode == 37) {
            thanhChan.diChuyenSangTrai = true;
        } else if (event.keyCode == 39) {
            thanhChan.diChuyenSangPhai = true;
        }
    });

    function veNhieuGach() {
        array.forEach(function (b) {
            if(!b.isBroken){
                context.beginPath();
                context.rect(b.x, b.y, luuGiaTriCacVienGach.width, luuGiaTriCacVienGach.height);
                context.fillStyle = "#ff3805";
                context.fill();
                context.closePath();
            }


        });
    }
</script>
</body>
</html>